[00:00:00] Writing user file...
[00:00:00] Writing channel file...
[00:14:24] <yulimoto> хм, влизам с като обикновен усер $ (обикновените усери имат лимит в limits.conf) после ставам руут (той няма лимит), но все пак имам ограничение. Представям си го така $bash->#bash, но тъй като парента е ограничен то въпреки че съм su пак съм ограничен. Така ли е ил
[00:18:24] <phalaaxx> как разбра, че имаш ограничение като root@
[00:18:26] <phalaaxx> ?
[00:18:49] <yulimoto> too many open files ili нещо подобно пишеше
[00:18:55] <yulimoto> в един случай ;
[00:18:59] <yulimoto> после
[00:19:05] <yulimoto> реших да видя
[00:19:14] <yulimoto> и се опитах да инсталирам lsof
[00:19:27] <yulimoto> too many open files единия път
[00:19:36] <yulimoto> други нещо s python
[00:19:41] <yulimoto> после влязох в
[00:19:56] <yulimoto> /etc/security/limits.conf
[00:20:08] <yulimoto> и си махнах лимита
[00:20:20] <yulimoto> излезнах и от двата шела
[00:20:26] <yulimoto> конектнах се пак
[00:20:33] <yulimoto> инсталирах лсоф
[00:20:53] <yulimoto> оправих лимита както си беше
[00:21:00] <phalaaxx> cheater :P
[00:21:59] <yulimoto> remove–нах лсоф ( iskah da widq дали лимита се актуализира веднага или при началото на сесията на баш ) и въпреки че в limits.conf беше актуализиран. пак можех да ремове
[00:22:08] <yulimoto> и така я махнах
[00:23:33] <yulimoto> т.е. мисля, че limits.conf се зарежда в началото на сесията на баша, и обхваща чайлдовете въпреки че те може да са рут. Нещо такова става.
[00:24:22] <yulimoto> най-добре се вижда с ps axfu дървото
[00:26:19] <phalaaxx> тц, не мисля че е така... може и да греша де, не съм си играл много с ограничаване на процеси
[00:26:51] <phalaaxx> но все пак: top -u yulimoto
[00:27:20] <phalaaxx> това са си твоите процеси и ако в някоя конзола напишеш sudo -i и изпълниш нещо друго - то няма да се появи в този списък
[00:28:49] <phalaaxx> lsof казваш... да взема и аз да пробвам че ми стана любопитно :)
[00:29:21] <yulimoto> която и да е малка програмка
[00:29:25] <yulimoto> няма значение
[00:29:33] <yulimoto> просто пробвах
[00:29:38] <yulimoto> просто пробвай
[00:30:04] <yulimoto> но интересното че излизат разлини грешки
[00:30:58] <yulimoto> в началото ми излизаше [error xxxx] Too many opened files /lib/yum/ и т.н.
[00:31:55] <yulimoto> сега ми излиза python: rpmio.c:1703: Fdopen: Assertion `fd && fd->magic == 0x04463138' failed.
[00:31:58] <yulimoto> Прекъснат
[00:32:53] <yulimoto> според мен има някаква връзка, с  ограничения парент или нещо подобно. вероятно не го казвам както трябва
[00:33:14] tuxar (~tuxar@ppp-94-69-251-193.home.otenet.gr) left irc: Ping timeout: 268 seconds
[00:33:24] <phalaaxx> мдаа странно
[00:34:54] <yulimoto> дори да си смениш лимитите, ако не излезнеш от ограничения и влезеш отново няма да стане
[00:35:55] <phalaaxx> интересно, а ако си запълниш потребителския лимит какво ли ще стане със судото :)
[00:36:55] <yulimoto> мисля, че ще се ограничи и то
[00:37:22] <yulimoto> но ... не знам
[00:37:23] <yulimoto> де
[00:37:30] <yulimoto> сега взех да се колебая
[00:38:28] <yulimoto> башчета ли правиш хахах
[00:39:08] <phalaaxx> тц, root сесията си е ок
[00:39:25] <phalaaxx> [phalaaxx@grizzly ~]$ ls
[00:39:25] <phalaaxx> bash: fork: retry: Resource temporarily unavailable
[00:39:44] <yulimoto> а баша си може така ли ?
[00:39:50] <yulimoto> т.е. рута
[00:40:35] <phalaaxx> да
[00:40:41] <phalaaxx> там си пускам разни неща
[00:40:53] <phalaaxx> top, ls, ... :)
[00:41:33] <yulimoto> добре сега ще измисля друго
[00:42:08] <yulimoto> $баш-#bash->20+процеса
[00:43:08] <phalaaxx> оо чакай малко
[00:44:30] <yulimoto> ?
[00:45:25] <phalaaxx> тц, фалшива тревога :)
[00:50:28] <phalaaxx> амии значи, в pam.d има нещо за sudo
[00:50:41] <phalaaxx> sudo и sudo-i
[00:51:07] <phalaaxx> и там има: session    required     pam_limits.so
[00:51:22] <phalaaxx> предполагам че това пренася ограничението към root като си минал през sudo
[00:51:39] dyrgel (~kolio@95.111.103.228) joined #telerikacademy.
[00:51:46] <phalaaxx> леле ама как обяснявам какво ми е в главата, добре че ми е в главата наистина че щях много да се псувам иначе
[00:53:27] <phalaaxx> не, не е това :)
[00:53:52] <dyrgel> здравейте, Мариан днес ме посъветва да се обърна към irc канала за ресетване на парола в grizzly-то, някой да може да помогне?
[00:54:04] <yulimoto> for i in $(seq 1 25);do sudo su ; done; няма проблем
[00:54:50] <phalaaxx> аа ама това не се изпълнява едновременно
[00:55:16] <yulimoto> ами нали от един влизам в негов чайлд
[00:55:26] <yulimoto> dyrgel: здравей
[00:55:28] <phalaaxx> да де ама се изпълняват последователно
[00:55:49] <yulimoto> aha
[00:56:10] <yulimoto> dyrgel:  за какво точно иде реч :)
[00:56:42] <phalaaxx> пробвай нещо такова:
[00:56:42] <phalaaxx> for i in $(seq 1 25); do sh -c 'sleep 60&'; done
[00:57:25] <yulimoto> и аз първо се сетих за слийп ama за & не се сетих, ей браво
[00:57:51] <yulimoto> dyrgel: на кое име е паролата ?
[00:58:43] <yulimoto> гледам че има dyrgel като потребител :)
[00:59:43] <yulimoto> phalaaxx: не е ли сложно така с sh -c
[01:00:00] Writing user file...
[01:00:00] Writing channel file...
[01:00:23] <phalaaxx> иначе ще ти е трудно на един ред да го стартираш в bg
[01:00:57] <phalaaxx> това е някаква обидна история, започва да ме дразни  :D
[01:03:47] <yulimoto> хахах
[01:07:11] <yulimoto> да
[01:07:55] <yulimoto> ама то пишеше тоо many open files
[01:07:57] <yulimoto> както ид а е
[01:08:15] <yulimoto> все пак при yum има някаква история
[01:09:33] <phalaaxx> вероятно е точно от тези ограничения
[01:10:06] <yulimoto> вероятно;
[01:11:13] dyrgel (~kolio@95.111.103.228) left irc: Quit: Leaving
[01:11:14] <phalaaxx> hard nofile 20 - от това е ама как го носи в root...
[01:11:28] <phalaaxx> ние root ли сме или какво? :D
[01:14:33] <phalaaxx> добреее, това е странно
[01:14:33] <phalaaxx> не бих очаквал да се държи така но явно това си му е нормално поведение
[01:15:40] <yulimoto> да
[01:15:49] <yulimoto> за процесите отпуска за файловете - ц
[01:20:04] <phalaaxx> добрееее
[01:20:09] <phalaaxx> разбрах го какво прави
[01:20:34] <yulimoto> какво ?
[01:21:32] <yulimoto> аз се наак*х и не мисля да продължам на гризлито малко се изплашх
[01:21:45] <phalaaxx> лимита дето е даден за потребителите - 20
[01:21:55] <phalaaxx> от hard става на soft след sudo
[01:22:05] <phalaaxx> защото няма soft за root
[01:22:24] <phalaaxx> споко аз ги правя зулумите на гризлито, ще го върна в предишния вид :)
[01:22:40] <yulimoto> ти го добави ли ?
[01:22:44] <yulimoto> и видя ?
[01:23:59] <yulimoto> ти ли добави Luke Skywalker в мотд
[01:24:02] <phalaaxx> значи като сложиш soft limit във limits.conf - като изпълниш sudo su или sudo -i - този soft лимит става актуален
[01:24:05] <phalaaxx> не :)
[01:24:10] <phalaaxx> някои по-рано го е добавил
[01:24:22] <phalaaxx> аз добавих soft limit за root
[01:24:34] <phalaaxx> и сега можеш да си инсталираш разни неща без да се оплаква
[01:24:34] <yulimoto> да видях 500
[01:24:47] <yulimoto> и как се сети ?
[01:24:59] <phalaaxx> странно, hard лимита му е доста голям - защо спира yum заради soft limit...
[01:25:14] <phalaaxx> рових из /proc :)
[01:25:29] <yulimoto> аха
[01:26:21] <phalaaxx> и все пак съм обиден от тази история :D
[01:26:26] <yulimoto> hahah
[01:26:36] <phalaaxx> не ми изглежда много интуитивно по този начин
[01:27:06] <yulimoto> да аз още не мога да си обясня
[01:27:59] <phalaaxx> вероятно обяснението го пише в няколко man page-а за syscalls и/или c библиотеки
[01:28:31] <yulimoto> ооо аз днес едвам я докарах до wait4() wait command
[01:28:42] <yulimoto> далече далече далече
[01:29:41] <yulimoto> това момче му смених паса; за протокола да кажа
[01:30:05] <yulimoto> ако стане нещо аз съм виновен дет се вика; има го в логовете
[01:31:18] <phalaaxx> в кои логове?
[01:32:01] <yulimoto> hahah :D
[01:32:04] <yulimoto> на чата !!!
[01:32:08] <yulimoto> хаха
[01:32:52] <yulimoto> хайде лягам оставам те с манa на setuid
[01:33:00] <yulimoto> че стана 2
[01:33:04] <phalaaxx> яснооо
[01:33:10] <phalaaxx> значи е нормално да е така
[01:33:15] <yulimoto> така ли ?
[01:33:16] <phalaaxx> заради setuid
[01:33:18] <yulimoto> що ?
[01:33:24] <phalaaxx> щото иначе
[01:33:38] <phalaaxx> може да ползваш sudo за да си превишаваш лимитите :)
[01:33:48] <yulimoto> аааааа
[01:34:36] <phalaaxx> нещо са пачвали преди години setuid точно за да не е възможно това нещо
[01:34:42] <yulimoto> вместо да ставаш рут; може да си ползваш sudo command ; обаче те са го предвидили и ... са го направили тако
[01:35:09] <yulimoto> това ли е ?
[01:35:22] <phalaaxx> преди 10 години точно са го пачвали :)
[01:35:42] <phalaaxx> амиии предполагам че можеш да си ползваш твоя си потребител
[01:35:59] <phalaaxx> и да си надхвърлиш лимита за твоя потребител
[01:36:01] <yulimoto> аха
[01:36:08] <phalaaxx> т.е. можело е
[01:36:10] <phalaaxx> вече не може
[01:36:13] <yulimoto> да
[01:36:17] <phalaaxx> затова и root-а е такъв странен
[01:36:21] <yulimoto> ясно
[01:36:49] <phalaaxx> коментарих softlimit-а в limits.conf
[01:36:53] <yulimoto> хубаво си беше да не може да се инсталира; сега белята заради на ще стане
[01:36:56] <yulimoto> да да
[01:36:58] <yulimoto> по-добре
[01:37:26] <phalaaxx> сякаш не може да прочете някой какво сме писали тук и да си го разкоментари :D
[01:37:30] <phalaaxx> или да си го напише :)
[01:38:07] <yulimoto> еее едно да отключиш вратата; друго да влезеш на отворена къща
[01:38:20] <phalaaxx> :)
[01:38:24] <yulimoto> пък и тия дето четат тия логове няма да тръгнат да зулумят
[01:38:46] <yulimoto> те и другите няма да тръгнат насила де
[01:39:47] <yulimoto> хайде лягам лека (и добро утро на тия дето ще четат логовете сутринта ;) )
[01:39:58] <phalaaxx> :D
[01:40:00] <phalaaxx> лека
[02:00:00] Writing user file...
[02:00:00] Writing channel file...
[02:10:14] phalaaxx (~bozhin@94.26.20.166) left irc: Quit: Leaving.
[02:30:51] phalaaxx (~bozhin@94.26.20.166) joined #telerikacademy.
[02:48:05] phalaaxx (~bozhin@94.26.20.166) left irc: Ping timeout: 276 seconds
[02:53:12] phalaaxx (~bozhin@94.26.20.166) joined #telerikacademy.
[03:00:00] Writing user file...
[03:00:00] Writing channel file...
[03:04:40] samy_ (~samy@84.238.184.98) joined #telerikacademy.
[03:04:52] nveselinov (nveselinov@151.237.4.4) left irc: Read error: Connection reset by peer
[03:05:28] nveselinov (nveselinov@151.237.4.4) joined #telerikacademy.
[03:08:29] samy (~samy@84.238.184.98) left irc: Ping timeout: 264 seconds
[04:00:00] Writing user file...
[04:00:00] Writing channel file...
[05:00:00] Writing user file...
[05:00:00] Writing channel file...
